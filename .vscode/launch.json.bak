{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
          "name": "Launch Sever",
          "type": "debugpy",
          "request": "launch",
          "program": "experiments/robot/franka/my_serve_policy.py",
          "console": "integratedTerminal",
          "justMyCode": true
      },
      {
        "name": "Debug Arm4r",
        "type": "debugpy",
        "request": "launch",
        "module": "torch.distributed.run",
        "cwd": "${workspaceFolder}/arm4r",
        "console": "integratedTerminal",
        "justMyCode": true,
        "env": {
          "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
          "TF_CPP_MIN_LOG_LEVEL": "3",
          "LAUNCHER": "pytorch",
          "CUDA_VISIBLE_DEVICES": "7",
        },
        "args": [
          "--nnodes", "1",
          "--node_rank", "0",
          "--master_addr", "127.0.0.1",
          "--nproc_per_node", "1",
          "--master_port", "34239",
          
          "scripts/finetune_robotics.py",
          "--dataset-cfg.dataset-json", "config/dataset_config_libero_goal.json",
          "--logging-cfg.output-dir", "output",
          "--logging-cfg.log-name", "debug",
          "--optimizer-cfg.warmup-epochs", "1.25",
          "--model-cfg.vision-encoder-cfg.vision-encoder", "arm4r-ckpts/vision_encoder/cross-mae-rtx-vitb.pth",
          "--dataset-cfg.num-repeat-traj", "1",
          "--model-cfg.policy-cfg.no-prompt-loss",
          "--model-cfg.policy-cfg.task", "robotics",
          "--model-cfg.policy-cfg.scratch-llama-config", "config/model_config/custom_transformer.json",
          "--dataset-cfg.non-overlapping", "1",
          "--shared-cfg.save-every", "5",
          "--model-cfg.policy-cfg.lora_rank", "128",
          // "--shared-cfg.rot_6d", "False",
          "--shared-cfg.num_pred_steps", "2",
          "--dataset-cfg.shuffle-repeat-traj",
          "--optimizer-cfg.lr", "5e-4",
          "--shared-cfg.seq_length", "5",
          "--model-cfg.policy-cfg.pretrained_path", "arm4r-ckpts/model_ckpts/pretrained_epic/pretrained_epic.pth",
          "--trainer-cfg.epochs", "20",
          "--shared-cfg.batch_size", "128"
          
        ],
      },
        {
          "name": "InternVL Chat Finetune AH P1 Hist FT",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/droid_pretrain_finetune_lora.py",
            "--model_name_or_path", "../internvl_chat/work_dirs/exp98_droid_pretrain_5hist/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-17000",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/ablaion_exp2_long_10hist_1img.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=9",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "Regenerate Libero Dataset Uniform",
          "type": "debugpy",
          "request": "launch",
          "cwd": "${workspaceFolder}",
          "program": "experiments/robot/libero/regenerate_libero_dataset_changepose_spatial_mv_benchmark.py",
          "console": "integratedTerminal",
          "justMyCode": false,
          "args": [
            "--libero_task_suite", "libero_spatial",
            "--libero_raw_data_dir", "/SSD_DISK/data/libero/raw_data/libero_spatial",
            "--libero_target_dir", "/SSD_DISK/data/libero/processed_data/debug",
            "--subtask_id", "0"
            // "--pose_folder", "change_pose_spatial_debug",
          ]
        },
        {
          "name": "Regenerate Libero Dataset",
          "type": "debugpy",
          "request": "launch",
          "cwd": "${workspaceFolder}",
          "program": "experiments/robot/libero/regenerate_libero_dataset_changepose_spatial_uniform.py",
          "console": "integratedTerminal",
          "justMyCode": false,
          "args": [
            "--libero_task_suite", "libero_spatial",
            "--libero_raw_data_dir", "/SSD_DISK/datasets/libero/raw_data/libero_spatial",
            "--libero_target_dir", "/SSD_DISK/datasets/libero/processed_data/debug",
            "--pose_folder", "change_pose_spatial_debug",
          ]
        },
        {
            "name": "Torchrun Finetune",
            "type": "debugpy",
            "request": "launch",
            // "program": "${workspaceFolder}/vla-scripts/finetune.py",
            "module": "torch.distributed.run",
            "args": [
                "--standalone",
                "--nnodes", "1",
                "--nproc-per-node", "1",
                "vla-scripts/finetune.py",
                "--vla_path", "hugg_models/openvla-7b",
                "--data_root_dir", "/SSD_DISK/users/zhangjiahui/openvla/data/franka/openvla_data_task1",
                "--dataset_name", "franka",
                "--run_root_dir", "checkpoints_log",
                "--adapter_tmp_dir", "checkpoints_log/adapter_tmp",
                "--lora_rank", "32",
                "--batch_size", "8",
                "--grad_accumulation_steps", "1",
                "--learning_rate", "5e-4",
                "--image_aug", "True",
                "--wandb_project", "OpenvlaFranka",
                "--wandb_entity", "jasonzhang992",
                "--save_steps", "1000"
            ],
            "console": "integratedTerminal",
            // "env": {
            //     "CUDA_LAUNCH_BLOCKING": "1"
            // }
        },
        {
            "name": "Train from Scratch",
            "type": "debugpy",
            "request": "launch",
            "module": "torch.distributed.run",
            "args": [
                "--standalone",
                "--nnodes", "1",
                "--nproc-per-node", "8",
                "vla-scripts/train.py",
                "--vla.type", "prism-dinosiglip-224px+mx-bridge",

                "--data_root_dir", "datasets/",
                "--run_root_dir", "checkpoints_log",
                "--pretrained_checkpoint", "hugg_models/openvla-7b-prismatic/checkpoints/step-295000-epoch-40-loss=0.2200.pt",
                "--is_resume", "False",
                
                "--wandb_project", "openvla_debug",
                "--wandb_entity", "jasonzhang992",
            ],
            "console": "integratedTerminal",
        },
        {
          "name": "InternVL Chat Finetune AH P1",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
            // "LD_LIBRARY_PATH": "/usr/local/cuda-11.8/lib64:${env:LD_LIBRARY_PATH}",
            // "PATH": "/usr/local/cuda-11.8/bin:${env:PATH}"
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/internvl_chat_finetune_action_head_p1.py",
            "--model_name_or_path", "../hugg_models/InternVL2-4B",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/data/internvl_1_2_finetune_libero_10_10history-v2-1sample_interval_ah_p1_hist.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "64",
            "--force_hist_image_size", "64",
            "--hist_len=9",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "1",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
            "name": "Train from Scratch InternVL",
            "type": "debugpy",
            "request": "launch",
            "module": "torch.distributed.run",
            "args": [
                "--standalone",
                "--nnodes", "1",
                "--nproc-per-node", "1",
                "vla-scripts/train.py",
                "--vla.type", "internvl4b-448px+mx-bridge",

                "--data_root_dir", "datasets/",
                "--run_root_dir", "checkpoints_log",
                "trackers", "jsonl",
                "--wandb_project", "openvla",
                "--wandb_entity", "jasonzhang992",
            ],
            "console": "integratedTerminal",
        },
        {
          "name": "InternVL Chat Finetune AH",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          // "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/internvl_chat_finetune.py",
            "--model_name_or_path", "../hugg_models/InternVL2-4B",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/wo_ah_1hist_s1.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=0",
            "--use_multi_size_image", "False",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "InternVL Chat Droid pretrain",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          // "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/internvl_chat_finetune_3d_droid_pretrain_mb.py",
            "--model_name_or_path", "../hugg_models/InternVL2-4B",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "/SSD_DISK/users/zhangjiahui/openvla/internvl_chat/shell/exp_data/droid_pretrain_debug.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=0",
            "--use_multi_size_image", "False",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "RLbench 2views",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/rlbench_2view_mb.py",
            "--model_name_or_path", "work_dirs/exp98_droid_pretrain_5hist/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-17000",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/rl_bench_meat_off_grill.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=4",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "True",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "InternVL Chat Finetune 3D",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          // "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/final_exp1_1img_10hist_3d_prop_pretrain_fixbug_mb.py",
            "--model_name_or_path", "work_dirs_ssd_group/exp98_droid_pretrain_5hist/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-17000",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/mb_ft_20ws_5bs_long.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=4",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "Finetune Franka",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          // "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "31339",
            // "internvl/train/finetune_franka_naive.py",
            // "internvl/train/finetune_franka_new.py",
            "internvl/train/finetune_franka_baseline_pt_mb_aug_dep.py",
            // "--model_name_or_path", "work_dirs/exp1_droid_pretrain_mb_20ws_5bs_frozenvit_fb/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            // "--model_name_or_path", "//SSD_DISK/users/zhangjiahui/openvla/internvl_chat/work_dirs_ssd_group/franka_new_bs32_20ep_baseline_pt_mb_dep_50samples_v5_norm_fb_20ep_frozen_embed",
            // "--model_name_or_path", "work_dirs_ssd_group/franka_new_bs32_40ep_traj2",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug",
            // "--meta_path", "shell/exp_data/franka_debug_naive.json",
            "--meta_path", "shell/exp_data/franka_task1_50samples_mb5.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=4",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "InternVL Chat Finetune AH P1 Hist Ablaion",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/droid_pretrain_finetune_full.py",
            "--model_name_or_path", "../hugg_models/InternVL2-4B",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/ablaion_exp2_long_10hist_1img_no_norm.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=9",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
          "name": "InternVL Chat Finetune AH P1 3D Proprio",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "justMyCode": false,
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34138",
            // "internvl/train/internvl_chat_finetune_3d_proprio_1view_drop_droid_pretrain_5hist_aug.py",
            "internvl/train/internvl_chat_finetune_3d_proprio_1view_drop.py",
            "--model_name_or_path", "../internvl_chat/work_dirs/exp98_droid_pretrain_5hist/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-17000",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/exp_data/mvbenchmark_small.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--force_hist_image_size", "224",
            "--hist_len=0",
            "--use_multi_size_image", "True",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },

        
        {
            "name": "Debug InternVL",
            "type": "debugpy",
            "request": "launch",
            // "module": "torch.distributed.run",
            // "program": "tools/generate_incontext_sft.py",
            // "program": "tools/process_rlds.py",
            // "program": "tools/process_rlds_memory.py",
            // "program": "tools/process_rlds_history_v2_2view.py",
            // "program": "tools/process_rlds_history_v2.py",
            // "program": "tools/process_rlds_history_v2_3d_multipose.py",
            // "program": "tools/ablation_exp1_1hist_1img_3d_proprio_text.py",
            // "program": "tools/ablation_exp4_5hist_1img_3d_proprio_s8.py",
            // "program": "tools/ablation_exp2_10hist_1img_3d_proprio_s4.py",
            // "program": "tools/simple_memory_bank_exp2.py",
            // "program": "tools/simple_adaptive_pooling.py",
            // "program": "tools/simple_mb_rl_bench.py",
            "program": "tools/simple_mb_rl_bench_delete.py",
            // "program": "tools/simple_mb_rl_bench_trainval.py",
            // "program": "tools/process_franka_data.py",
            // "program": "tools/process_franka_data_task4.py",
            // "program": "tools/process_franka_data_mv.py",
            // "program": "tools/process_franka_data_naive_task4.py",
            // "program": "tools/process_franka_data_naive_mv.py",
            // "program": "tools/process_franka_data_single_input.py",
            // "program": "tools/process_franka_data_single_input_task4.py",
            // "program": "tools/process_franka_data_single_input_mv.py",
            // "program": "tools/process_rlds_history_v2_action_head.py",
            // "program": "tools/generate_image_prompt.py",
            "cwd": "${workspaceFolder}/internvl_chat",
            "console": "integratedTerminal",
            "justMyCode": true,

        },
        {
          "name": "Run libero internvl Ablation mb spatial",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation_mb_embed.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/mb_spatial/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "2",
            // "--num_task_for_eval", "10",
            "--task_id", "0",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "True",
            "--hist_version", "v2",
            "--hist_len", "5",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "False",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl Ablation 1 img",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/one_img/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "2",
            // "--num_task_for_eval", "10",
            "--task_id", "0",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "False",
            "--hist_version", "v2",
            "--hist_len", "5",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "False",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl Ablation qformer",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation_mb_embed_qformer.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/qformer_per_frame/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "2",
            // "--num_task_for_eval", "10",
            "--task_id", "0",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "True",
            "--hist_version", "v2",
            "--hist_len", "20",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "False",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl Ablation arm4r",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation_mb_embed_arm4r.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/qformer_per_frame/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "20",
            // "--num_task_for_eval", "10",
            "--task_id", "0",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "True",
            "--hist_version", "v2",
            "--hist_len", "5",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "True",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl Ablation grid pool",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation_mb_embed_qformer.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/grid_pooling/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "2",
            // "--num_task_for_eval", "10",
            "--task_id", "9",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "True",
            "--hist_version", "v2",
            "--hist_len", "20",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "False",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl Ablation adaptive pooling",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation_mb_embed_adaptive_pooling.py",
          // "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_ablation.py",
          "console": "integratedTerminal",
          "justMyCode": true,
          "args": [
            "--model_family", "internvl",
            "--pretrained_checkpoint", "internvl_chat/work_dirs/adaptive_pooling/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "2",
            // "--num_task_for_eval", "10",
            "--task_id", "0",
            "--center_crop", "False",
            "--use_nromaction", "False",
            "--use_hist", "True",
            "--hist_version", "v2",
            "--hist_len", "5",
            "--use_action_hist", "False",
            "--use_anyview", "False",
            "--use_2view", "False",
            "--use_image_prompt", "False",
            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_depth", "False",
            "--use_proprio", "False",
            "--is_ft", "False",
            "--exp_name", "debug_for_demo"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "7"
          }
        },
        {
          "name": "Run libero internvl",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/run_libero_eval_uniform_small.py",
          "console": "integratedTerminal",
          "justMyCode": false,
          "args": [
            // "--model_family", "internvl",
            // "--pretrained_checkpoint", "internvl_chat/work_dirs_ssd_group/mvbench_small_libero_spatial_1hist_1img_1sample_interval_ah_p1_3d_prop_large_uniform_drop0/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-11475",
            "--model_family", "openvla",
            "--pretrained_checkpoint", "hugg_models/openvla-7b-finetuned-libero-spatial",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "20",
            "--num_task_for_eval", "1",
            "--center_crop", "False",
            "--use_nromaction", "True",
            "--use_hist", "False",
            "--hist_version", "v2",
            "--hist_len", "1",
            "--use_anyview", "False",
            "--use_2view", "False",

            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_proprio", "True",
            "--use_depth", "True",
            "--change_pose", "True",
            "--exp_name", "test_exp63_nozeroshot3_2ep"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "2"
          }
        },
        {
          "name": "Debug Droid",
          "type": "debugpy",
          "request": "launch",
          "program": "${workspaceFolder}/experiments/robot/libero/debug.py",
          "console": "integratedTerminal",
          "justMyCode": false,
          "args": [
            "--model_family", "internvl",
          //   "--model_family", "openvla",
          //   "--pretrained_checkpoint", "hugg_models/openvla-7b-finetuned-libero-spatial",
            "--task_suite_name", "libero_spatial",

            "--num_trials_per_task", "20",
            "--num_task_for_eval", "1",
            "--center_crop", "False",
            "--use_nromaction", "True",
            "--use_hist", "False",
            "--hist_version", "v2",
            "--hist_len", "10",
            "--use_anyview", "False",
            "--use_2view", "False",

            "--use_multi_size", "True",
            "--sample_interval", "1",
            "--use_proprio", "False",
            "--chage_pose", "True",
            "--exp_name", "test_exp63_nozeroshot3_2ep"
            // "--prompt_version", "v1"
          ],
          "env": {
              "CUDA_VISIBLE_DEVICES": "2"
          }
        },
          {
            "name": "InternVL Chat Finetune",
            "type": "debugpy",
            "request": "launch",
            "module": "torch.distributed.run",
            "cwd": "${workspaceFolder}/internvl_chat",
            "console": "integratedTerminal",
            "env": {
              "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
              "TF_CPP_MIN_LOG_LEVEL": "3",
              "LAUNCHER": "pytorch",
              "CUDA_VISIBLE_DEVICES": "2",
            },
            "args": [
              "--nnodes", "1",
              "--node_rank", "0",
              "--master_addr", "127.0.0.1",
              "--nproc_per_node", "1",
              "--master_port", "34239",
              "internvl/train/internvl_chat_finetune.py",
              "--model_name_or_path", "../hugg_models/InternVL2-4B",
              "--conv_style", "phi3-chat",
              "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
              "--meta_path", "shell/data/internvl_1_2_finetune_libero_spatial_5history-v2.json",
              "--overwrite_output_dir", "True",
              "--force_image_size", "448",
              "--max_dynamic_patch", "6",
              "--down_sample_ratio", "0.5",
              "--drop_path_rate", "0.0",
              "--freeze_llm", "False",
              "--freeze_mlp", "False",
              "--freeze_backbone", "True",
              // "--use_llm_lora", "16",
              "--vision_select_layer", "-1",
              "--dataloader_num_workers", "4",
              "--bf16", "True",
              "--num_train_epochs", "1",
              "--per_device_train_batch_size", "1",
              "--gradient_accumulation_steps", "1",
              "--evaluation_strategy", "no",
              "--save_strategy", "steps",
              "--save_steps", "200",
              "--save_total_limit", "1",
              "--learning_rate", "4e-5",
              "--weight_decay", "0.05",
              "--warmup_ratio", "0.03",
              "--lr_scheduler_type", "cosine",
              "--logging_steps", "1",
              "--max_seq_length", "4096",
              "--do_train", "True",
              "--grad_checkpoint", "True",
              "--group_by_length", "True",
              "--dynamic_image_size", "True",
              "--use_thumbnail", "True",
              "--ps_version", "v2",
              "--deepspeed", "zero_stage1_config.json",
              "--report_to", "tensorboard"
            ],
        },
        {
          "name": "InternVL Chat Memory",
          "type": "debugpy",
          "request": "launch",
          "module": "torch.distributed.run",
          "cwd": "${workspaceFolder}/internvl_chat",
          "console": "integratedTerminal",
          "env": {
            "PYTHONPATH": "${env:PYTHONPATH}:${workspaceFolder}",
            "TF_CPP_MIN_LOG_LEVEL": "3",
            "LAUNCHER": "pytorch",
            "CUDA_VISIBLE_DEVICES": "7",
          },
          "args": [
            "--nnodes", "1",
            "--node_rank", "0",
            "--master_addr", "127.0.0.1",
            "--nproc_per_node", "1",
            "--master_port", "34239",
            "internvl/train/internvl_chat_memory.py",
            "--model_name_or_path", "work_dirs/exp10_pretrain/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-60000",
            "--conv_style", "phi3-chat",
            "--output_dir", "work_dirs/debug/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full",
            "--meta_path", "shell/data/internvl_1_2_finetune_libero_spatial_5history.json",
            "--overwrite_output_dir", "True",
            "--force_image_size", "448",
            "--max_dynamic_patch", "6",
            "--down_sample_ratio", "0.5",
            "--drop_path_rate", "0.0",
            "--freeze_llm", "False",
            "--freeze_mlp", "False",
            "--freeze_backbone", "True",
            // "--use_llm_lora", "16",
            "--vision_select_layer", "-1",
            "--dataloader_num_workers", "4",
            "--bf16", "True",
            "--num_train_epochs", "1",
            "--per_device_train_batch_size", "2",
            "--gradient_accumulation_steps", "1",
            "--evaluation_strategy", "no",
            "--save_strategy", "steps",
            "--save_steps", "200",
            "--save_total_limit", "1",
            "--learning_rate", "4e-5",
            "--weight_decay", "0.05",
            "--warmup_ratio", "0.03",
            "--lr_scheduler_type", "cosine",
            "--logging_steps", "1",
            "--max_seq_length", "4096",
            "--do_train", "True",
            "--grad_checkpoint", "True",
            "--group_by_length", "True",
            "--dynamic_image_size", "True",
            "--use_thumbnail", "True",
            "--ps_version", "v2",
            "--deepspeed", "zero_stage1_config.json",
            "--report_to", "tensorboard"
          ],
        },
        {
            "name": "Eval Calvin",
            "type": "debugpy",
            "request": "launch",
            // "program": "${workspaceFolder}/eval_calvin/eval_calvin.py",
            "module": "torch.distributed.run",
            "cwd": "/SSD_DISK/users/zhangjiahui/openvla",
            "justMyCode": false,
            "args": [
              "--nnodes", "1",
              "--nproc_per_node", "1",
              "--master_port", "6069",
              "experiments/robot/calvin/run_calvin_eval.py",
            //   "--use_gripper",
            //   "--use_state",
              "--visualize",
              "--run_name", "DebugEvalInternvl",
              "--model_name", "internvl",
              // "--data_statistic_path", "../calvin/dataset/task_ABCD_D/dataset_statistics_153b8d227c5826d926f136dd6ac387cffeac1235ad4268c2099f9dbcabc11bd0.json",
              "--debug",
              "--calvin_dataset", "../calvin/dataset/task_ABCD_D",
              "--model_path", "internvl_chat/work_dirs_ssd_group/exp2_calvin_ABC_D_10hist_2img_1sample_interval_ah_p1_3d_prop_pretrain/internvl2_4b_phi3_3_8b_dynamic_res_2nd_finetune_full/checkpoint-21345",
              "--calvin_conf_path", "../calvin/calvin_models/conf",
              // "--use_image_prompt", "True",
              // "--prompt_version", "v2",
              "--use_2view", "True"
            ],
            "env": {
              "CUDA_VISIBLE_DEVICES": "7"
            },
            "console": "integratedTerminal"
        },
    ]
}